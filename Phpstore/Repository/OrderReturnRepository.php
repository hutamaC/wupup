<?php

namespace Phpstore\Repository;
use LaraStore\Presenters\OrderReturnPresenter;

trait OrderReturnRepository{

	/*
    |-------------------------------------------------------------------------------
    |
    | 申请退货的时间
    |
    |-------------------------------------------------------------------------------
    */
    public function time(){

    	return date('Y-m-d',$this->add_time);
    }

    /*
    |-------------------------------------------------------------------------------
    |
    | 退货状态
    |
    |-------------------------------------------------------------------------------
    */
    public function status(){

    	$arr 		= ['没有退货','退货审核中','退货进行中','退货完成'];
    	return (in_array($this->return_status,[0,1,2,3]))? $arr[$this->return_status] : $arr[0];
    }


    /*
    |-------------------------------------------------------------------------------
    |
    |  presenter
    |
    |-------------------------------------------------------------------------------
    */
    public function presenter(){
    	return new OrderReturnPresenter($this);
    }


    /*
    |-------------------------------------------------------------------------------
    |
    |  获取订单号
    |
    |-------------------------------------------------------------------------------
    */
    public function getOrderSnAttribute(){
    	return $this->presenter()->order_sn();
    }


    /*
    |-------------------------------------------------------------------------------
    |
    |  获取申请时间
    |
    |-------------------------------------------------------------------------------
    */
    public function getCreateTimeAttribute(){
    	return $this->time();
    }


    /*
    |-------------------------------------------------------------------------------
    |
    |  获取状态
    |
    |-------------------------------------------------------------------------------
    */
    public function getStatusFormatAttribute(){
    	return $this->status();
    }

    /*
    |-------------------------------------------------------------------------------
    |
    |  获取退货单预览链接
    |
    |-------------------------------------------------------------------------------
    */
    public function getUrlAttribute(){
    	return $this->presenter()->url;
    }
}